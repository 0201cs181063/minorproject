
from flask import Flask, render_template, request
import numpy as np
import json
import joblib,os
import urllib
import urllib.request
import youtube_transcript_api
import jinja2
import requests
from googletrans import Translator
from gensim.summarization import summarize, keywords
from pprint import pprint

from youtube_transcript_api import YouTubeTranscriptApi

app = Flask(__name__)

@app.route('/')
def man():
    return render_template('index.html')
@app.route('/about')
def man1():
    return render_template('about.html')

h=""
@app.route('/aboutform', methods=['POST'])
def trans():
    transL=Translator()
    lang = request.form['len']
    text1=h
    if lang=='Hindi':
        v='hi'
    if lang=='German':
        v='de'
    if lang=='French':
        v='fr'
    if lang=='English':
        v='en'

    m=transL.translate(text1, dest=v)
    r=[]
    r.append(m.text)
    return render_template('about.html', data=r)

@app.route('/about', methods=['POST'])
def home():
    try:
        youtube_video = request.form['a']
        video_id = youtube_video.split("=")[1]
    except Exception as a:
        array1=[]
        array1.append("invalid link or transcript unavailable")
        return render_template('about.html', error=array1)

    try:
        YouTubeTranscriptApi.get_transcript(video_id)
        transcript = YouTubeTranscriptApi.get_transcript(video_id)
    except Exception as e:
        array=[]
        array.append("invalid link or transcript unavailable")
        return render_template('about.html', error=array)

    summarized_text1.append(summarize( transcript, word_count=100))
    response = requests.request("POST",data=summarized_text1)
    
if __name__ == "__main__":
    app.run(debug=True)
